\documentclass{article}
\usepackage{graphicx}
\usepackage{float}
\usepackage{geometry}
\usepackage{xcolor}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage[utf8]{inputenc} % for Unicode input
\usepackage[T1]{fontenc} % for font encoding
\usepackage{lmodern} % Latin Modern font that supports the T1 encoding
\usepackage{textcomp} % for additional symbols
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{setspace}
\usepackage{enumitem}
\usepackage{listings} % For code listing

% Custom colors for code highlighting
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% Set listings configuration
\lstset{
  basicstyle=\ttfamily,
  frame=single,
  breaklines=true,
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
  numbers=left,
  numberstyle=\small,
  numbersep=8pt,
  showstringspaces=false,
  tabsize=2,
  language=bash,
  captionpos=b
}

% Adjust margins as needed
\geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 top=20mm,
}

\title{Linux File Permissions}
\author{Abraham J. Reines}
\date{\today}

\begin{document}

\maketitle

\section*{Introduction}
In order to verify the answers of our project on Linux File Permissions, multiple bash scripts were written. The scripts are found in the \textit{'Script Listings'} section at the bottom of this report. The output of the script \texttt{assignment\_solutions.sh} can be found at the top of sections 3.4.1, 3.4.2, 3.4.3 of this report. 

\section*{3.4.1 Understanding Linux file permissions}

\subsection*{Output of Solutions for 3.4.1:}
\lstinputlisting[firstline=1, lastline=13,caption={Solutions to 3.4.1.}]{solutions_output.txt}

\begin{enumerate}
    \item \textbf{Can Alice read Bob's file \texttt{data.txt}? Why?}\\
    Yes, the file \texttt{data.txt} permissions are set as \texttt{-rw-r----r--}, which grants read access to all users including Alice.
    
    \item \textbf{Can Alice remove Bob's file \texttt{data.txt}? Why?}\\
    No, Alice lacks write permission on Bob's home directory \texttt{/cs/home/stu/bob}, which is required to delete files.
    
    \item \textbf{Can Alice read Bob's file \texttt{secret.txt}? Why?}\\
    No, the file \texttt{secret.txt} has permissions \texttt{-rw-r-----}, which restricts read access to the owner and group `faculty`. Since Alice is not a member of the `faculty` group, she does not have read access.
    
    \item \textbf{Can Alice remove Bob's file \texttt{secret.txt}? Why?}\\
    No, Alice cannot delete \texttt{secret.txt} due to the absence of write permission in Bob's home directory.
    
    \item \textbf{When Bob creates a new file with the command \texttt{echo “My Super Secret is b7d5d78shes” > mysecret.txt}, what are the full permissions of this file?}\\
The full permissions for the new file \texttt{/cs/home/stu/bob/mysecret2.txt} are: \texttt{-rw-r-Sr-- 1 bob faculty 0 Feb 22 16:48 /cs/home/stu/bob/mysecret2.txt}
\end{enumerate}

\section*{3.4.2 Setting Linux file permissions}

\subsection*{Output of Solutions for 3.4.2:}
\lstinputlisting[firstline=15, lastline=29,caption={Solutions to 3.4.2.}]{solutions_output.txt}

\begin{enumerate}
    \item \textbf{Can Bob change the permissions so that all other students in \texttt{csmajor} can read \texttt{data.txt}, but any other users who are not in \texttt{csmajor} cannot?}\\
    Yes, by executing \texttt{chmod 640 /cs/home/stu/bob/data.txt}, Bob sets the file \texttt{data.txt} to be readable and writable by the owner and only readable by the group.
    
    \item \textbf{If Bob wants to set the default permission of his new files to be readable and writable by himself and the group, and readable by others, what commands should he use? Hint: use umask.}\\
    Bob should issue the command \texttt{umask 002} to ensure files are created with \texttt{rw--rw--r----} permissions and directories with \texttt{drwxr-s----}.
\end{enumerate}

\section*{3.4.3 A more complex case}

Please see lines \textit{114-185} of \texttt{assignment\_solutions.sh} for the proper commands to accomplish Alice's desired effect. The following are commands for running the scripts: 

\begin{lstlisting}[language=bash]
sudo chmod +x setup_assignment.sh
sudo ./setup_assignment.sh
sudo chmod +x assignment_solutions_v2. sh
sudo ./assignment_solutions_v2.sh > solutions_output.txt
\end{lstlisting}

{\color{red}Alice should verify these settings in her environment to ensure they are correct. Should she face permission-related issues, the system administrator’s intervention may be required. She will most likely need to use sudo. If Alice can request sudo privileges for specific commands, she can ask the administrator to add Bob to the group or do it herself if granted those privileges. }

\subsection*{Output of Solutions for 3.4.3:}
\lstinputlisting[firstline=31, lastline=53,caption={Solutions to 3.4.3.}]{solutions_output.txt}

\section*{Script Listings}
\lstinputlisting[caption={Initial setup with setup\_assignement.sh.}]{setup_assignment.sh}
\lstinputlisting[caption={assignment\_solutions.sh for printing assignment solutions.}]{assignment_solutions.sh}

\vfill
  \section*{Academic Integrity Pledge}
    {\color{red}\textit{“This work complies with the JMU honor code. I did not give or receive unauthorized help on this assignment.”}}

\end{document}